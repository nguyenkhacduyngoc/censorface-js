<html>
    <head>
        <title>Face detection</title>
        <meta charset = "utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link href = "normalize.css" rel = "stylesheet">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>
    
        <style type = 'text/css'>
            .top-bar {
                margin-bottom: 1em;
            }

            .main-container {
                padding: 1em 10% 1em 10%;
            }

            .row-area {
                margin-bottom: 1em;
            }

            .header-margin {
                margin-bottom: 0.5em;
            }

            .navbar-form {
                margin-right: 0.5em;
            }
        </style>
    </head>

    <body>
        <nav class="navbar navbar-expand-lg navbar-light bg-light ">
            <div class="container-fluid">
                <span class="navbar-brand mb-0 h1">Censorface</span>

                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                        <li class="nav-item">
                            <a class="nav-link" href="/">Home</a>
                        </li>
                        
                        <li class="nav-item">
                            <a class="nav-link" id='clear-image' href="#" style = 'display:none;'>Delete Photo</a>
                        </li>
                    </ul>
                </div>

                <form class="d-flex my-2 my-lg-0">
                    <div class="input-group navbar-form">
                        <span class="input-group-text" id="basic-addon1">Image</span>
                        <input type = 'file' id = 'browseimage' class = 'form-control me-2' />
                    </div>

                    <div class="input-group navbar-form">
                        <input type="text" class="form-control" placeholder="Thickness" aria-label="Thickness" id="thickness" size="2" pattern = "\d+" value = "0">
                    </div>

                    <button class="btn btn-outline-success my-2 my-sm-0" id = 'capture-face'>Censor</button>
                </form>
            </div>
        </nav>

        <div class="container-fluid">
            <div class = 'main-container'>
                <div class = 'row'>
                    <div class = 'col'>
                        <h1 class = 'header-margin'>Censorface</h1>
                        <p>In this example, the model is come from RetinaFace algorithm which is a state-of-the-art single stage face detection algorithm shown in CVPR 2020.</p>
                        <p>The paper you can follow this <a href = "https://arxiv.org/abs/1905.00641">link</a> which has title RetinaFace: Single-stage Dense Face Localisation in the Wild.</p>
                        <p>You have to select file from upper right with definition of thickness of censor area. Then, you click censor. You will se the result. 
                            If you don't want the result photo below anymore, you have to click delete before censoring the next photo.</p>
                    </div>
                </div>

                <div class = 'row'>
                    <div class = 'col'>
                        <h5 class = 'header-margin'>Citation</h5>
                        <p>Deng J, Guo J, Zhou Y, Yu J, Kotsia I, Zafeiriou S. Retinaface: Single-stage dense face localisation in the wild. arXiv preprint arXiv:1905.00641. 2019 May 2.</p>
                    </div>
                </div>

                <div class = 'row' id = 'alert-area' style = 'display:none;'>
                    <div class = 'col'>
                        <div class="alert alert-secondary alert-dismissible fade show" role="alert" id = >
                            <span id = 'alert-text'>Loading...</span>
                            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                        </div>
                    </div>
                </div>

                <div class = "row row-area" id = 'preview-area' style = 'display:none;'>
		            <div class = "col">
                        <h3 class = 'header-margin'>Preview</h3>
                        <canvas id = 'main-canvas-area' style = 'display:none'></canvas>
                    </div>
                </div>
				
                <div class = 'row row-area' id = 'download-image-area' style = 'display:none;'>
                    <div class = "col">
                        <h3 class = 'header-margin'>Result Image</h3
			            <p>If you satisfy the face detection result, you can download the image by Right click.</p>
			            <img src = '' id = 'main-image-area'></img>
                    </div>
                </div>
            </div>
        </div>

        
        <script src = 'js/common.js'></script>
        <script src = 'js/opencv.js'></script>
        <script src = 'js/onnx_face.js'></script>
        <script src = './onnx.min.js'></script>
        <script src = './onnx-wasm.js'></script>
        <script src = 'js/ndarray-browser-min.js'></script>
        <script src = 'js/index.js'></script>
    </body>
</html>
